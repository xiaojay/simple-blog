# GitHub Actions å·¥ä½œæµé…ç½®æ–‡ä»¶
# è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ CI/CD ç¤ºä¾‹ï¼Œç”¨äºæ•™å­¦

# å·¥ä½œæµçš„åç§°ï¼Œä¼šæ˜¾ç¤ºåœ¨ GitHub Actions æ ‡ç­¾é¡µ
name: ç®€å• CI

# è§¦å‘æ¡ä»¶ï¼šä»€ä¹ˆæ—¶å€™è¿è¡Œè¿™ä¸ª workflow
on:
  # å½“ä»£ç æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘
  push:
    branches: [ main ]
  # å½“æœ‰äººåˆ›å»º Pull Request åˆ° main åˆ†æ”¯æ—¶è§¦å‘
  pull_request:
    branches: [ main ]

# å®šä¹‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆjobsï¼‰
jobs:
  # ä»»åŠ¡åç§°ï¼šæ„å»º
  build:
    # è¿è¡Œç¯å¢ƒï¼šä½¿ç”¨ Ubuntu æœ€æ–°ç‰ˆæœ¬
    runs-on: ubuntu-latest

    # ä»»åŠ¡ä¸­çš„å…·ä½“æ­¥éª¤
    steps:
      # æ­¥éª¤ 1: æ£€å‡ºä»£ç 
      # ä½¿ç”¨ GitHub å®˜æ–¹çš„ checkout action å°†ä»£ç ä¸‹è½½åˆ°è¿è¡Œç¯å¢ƒ
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      # æ­¥éª¤ 2: è®¾ç½® Node.js ç¯å¢ƒ
      # ä½¿ç”¨ GitHub å®˜æ–¹çš„ setup-node action å®‰è£… Node.js
      - name: è®¾ç½® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'  # ä½¿ç”¨ Node.js 20 ç‰ˆæœ¬

      # æ­¥éª¤ 3: å®‰è£…ä¾èµ–
      # è¿è¡Œ npm install å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–åŒ…
      - name: å®‰è£…ä¾èµ–
        run: npm install

      # æ­¥éª¤ 4: æ„å»ºé¡¹ç›®
      # è¿è¡Œ npm run build æ„å»ºç”Ÿäº§ç‰ˆæœ¬
      - name: æ„å»ºé¡¹ç›®
        run: npm run build

      # æ­¥éª¤ 5: æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      # è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ shell å‘½ä»¤ç¤ºä¾‹
      - name: å®Œæˆ
        run: echo "ğŸ‰ æ„å»ºæˆåŠŸï¼"
